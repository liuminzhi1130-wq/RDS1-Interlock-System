<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RDS é€£é–é‚è¼¯æŸ¥è©¢ç³»çµ±</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-color: #e0e5ec;
            --text-main: #4a5568;
            --text-highlight: #2d3748;
            --shadow-light: #ffffff;
            --shadow-dark: #a3b1c6;
            --accent-color: #667eea; /* æŸ”å’Œçš„è—ç´«è‰² */
            --trip-color: #e53e3e;   /* æŸ”å’Œçš„ç´…è‰²ç”¨æ–¼è·³è»Š */
        }

        /* è‡ªå®šç¾©æ¿æ‰‹æ¸¸æ¨™ (SVG Base64) */
        .cursor-wrench {
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%234a5568' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'></path></svg>") 10 10, pointer;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            margin: 0;
            padding: 40px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s ease;
        }

        h1 {
            color: var(--text-highlight);
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 40px;
            text-align: center;
        }

        /* Soft UI Container */
        #app-container {
            width: 100%;
            max-width: 900px;
            background: var(--bg-color);
            border-radius: 30px;
            padding: 40px;
            /* Neumorphism Shadow */
            box-shadow: 20px 20px 60px var(--shadow-dark), 
                       -20px -20px 60px var(--shadow-light);
            min-height: 500px;
        }

        /* Soft UI Buttons */
        .btn {
            border: none;
            outline: none;
            background: var(--bg-color);
            color: var(--text-main);
            font-size: 1.1rem;
            font-weight: 600;
            padding: 20px;
            border-radius: 15px;
            /* Soft Button Shadow */
            box-shadow: 6px 6px 12px var(--shadow-dark), 
                       -6px -6px 12px var(--shadow-light);
            transition: all 0.2s ease;
            width: 100%;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Apply custom cursor to buttons */
        .btn:hover {
            color: var(--accent-color);
            transform: translateY(-2px);
            /* Wrench cursor on hover */
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'></path></svg>") 10 10, pointer;
        }

        .btn:active {
            box-shadow: inset 4px 4px 8px var(--shadow-dark), 
                        inset -4px -4px 8px var(--shadow-light);
            transform: translateY(0);
        }

        .btn-back {
            color: var(--accent-color);
            margin-bottom: 30px;
            width: auto;
            display: inline-block;
            padding: 10px 30px;
        }

        .grid-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
        }

        /* Table Styling */
        .detail-card {
            background: var(--bg-color);
            border-radius: 20px;
            padding: 20px;
            box-shadow: inset 5px 5px 10px var(--shadow-dark), 
                        inset -5px -5px 10px var(--shadow-light);
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px; 
            margin-top: 10px;
        }

        th {
            text-align: left;
            color: var(--accent-color);
            padding: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        td {
            background: var(--bg-color);
            padding: 15px;
            border-top: 1px solid rgba(255,255,255,0.5);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            color: var(--text-highlight);
        }

        tr td:first-child {
            border-radius: 10px 0 0 10px;
            font-weight: 500;
        }
        tr td:last-child {
            border-radius: 0 10px 10px 0;
        }

        .tag-no {
            color: var(--accent-color);
            font-family: 'Consolas', monospace;
            font-weight: bold;
        }

        .value {
            color: var(--trip-color);
            font-weight: bold;
        }

        /* Mermaid Mindmap Container */
        .mermaid-container {
            width: 100%;
            overflow-x: auto;
            padding: 10px;
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>

    <h1>RDS INTERLOCK SYSTEM</h1>

    <div id="app-container">
        <div id="display-area">
            </div>
    </div>

    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({ startOnLoad: true, theme: 'base', themeVariables: { primaryColor: '#e0e5ec', primaryTextColor: '#4a5568', lineColor: '#667eea' } });

        // è³‡æ–™åº« (èˆ‡ä¹‹å‰ç›¸åŒï¼Œæ•¸æ“šä¿æŒæº–ç¢º)
        const db = {
            "Compressor": {
                "C-2001A": [
                    { reason: "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", tag: "PSLL-603 A/B/C", value: "14.8 kg/cmÂ²", logic: "3é¸2" },
                    { reason: "ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", tag: "TSHH-397 A/B/C", value: "149Â°C", logic: "3é¸2" },
                    { reason: "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", tag: "PALL-768", value: "1.7 kg/cmÂ²", logic: "" },
                    { reason: "æ³¨æ²¹å™¨ä½æ¶²é¢", tag: "LALL-566", value: "3.5 kg/cmÂ²", logic: "" },
                    { reason: "ä¸»é¦¬é”ç·šåœˆæº«åº¦é«˜", tag: "TAHH-496 B/D/F", value: "140Â°C", logic: "" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-955 A/B", value: "æ§åˆ¶å®¤/L.P", logic: "" }
                ],
                "C-2001B": [
                    { reason: "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", tag: "PSLL-612 A/B/C", value: "14.8 kg/cmÂ²", logic: "3é¸2" },
                    { reason: "ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", tag: "TSHH-400 A/B/C", value: "149Â°C", logic: "3é¸2" },
                    { reason: "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", tag: "PALL-769", value: "1.7 kg/cmÂ²", logic: "" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-959 A/B", value: "æ§åˆ¶å®¤/L.P", logic: "" }
                ],
                "C-2001C": [
                    { reason: "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", tag: "PSLL-620 A/B/C", value: "14.8 kg/cmÂ²", logic: "3é¸2" },
                    { reason: "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", tag: "PALL-770", value: "1.7 kg/cmÂ²", logic: "" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-963 A/B", value: "æ§åˆ¶å®¤/L.P", logic: "" }
                ],
                "C-2002": [
                    { reason: "C-2002 å‡ºå£é«˜é«˜æº«åº¦", tag: "TSHH-406 A/B/C", value: "193Â°C", logic: "3é¸2" },
                    { reason: "C-2002 å‡ºå£ä½ä½æµé‡", tag: "FSLL-140 A/B/C", value: "100 MÂ³/H", logic: "3é¸2 (å¯Override)" },
                    { reason: "æ»‘æ²¹å£“åŠ›ä½", tag: "PALL-791", value: "0.56 kg/cmÂ²", logic: "Delay 1 sec" },
                    { reason: "å¯†å°æ²¹/æ°£å·®å£“ä½", tag: "DPALL-786", value: "0.21 kg/cmÂ²", logic: "Delay 1 sec" },
                    { reason: "è¶…é€Ÿè·³è»Š", tag: "-", value: "12628 rpm", logic: "" },
                    { reason: "é€²å£ä½ä½å£“åŠ›", tag: "PSLL-654 A/B/C", value: "0.14 kg/cmÂ²", logic: "3é¸2" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-906", value: "æ§åˆ¶å®¤", logic: "" }
                ],
                "C-2003": [
                    { reason: "ç¬¬ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", tag: "TSHH-408(A)/409(B)", value: "140Â°C", logic: "" },
                    { reason: "é€²å£ä½ä½å£“åŠ›", tag: "PSLL-656 A/B/C", value: "0.14 kg/cmÂ²", logic: "3é¸2" },
                    { reason: "æ›²è»¸ç®±æ»‘æ²¹å£“åŠ›ä½", tag: "PALL-838(A)/839(B)", value: "0.35 kg/cmÂ²", logic: "" }
                ],
                "C-2004": [
                    { reason: "å‡ºå£ä½å£“åŠ›", tag: "PSL-681", value: "50 mmH2O", logic: "D-2002ç›¸é—œ" },
                    { reason: "D-2002 ä½ä½æ¶²ä½", tag: "LSLL-429 A/B/C", value: "-", logic: "3é¸2" }
                ],
                "C-2005": [
                    { reason: "é€²å‡ºå£é«˜å·®å£“", tag: "PDSLL-733 A/B/C", value: "80 mmH2O", logic: "è§¸ç™¼å¾Œé–‹å•Ÿ XV-941" },
                    { reason: "C-2005 è·³è»Š", tag: "-", value: "XV-941é–‹å•Ÿ5ç§’å¾Œè‹¥æœªå…¨é–‹", logic: "å»¶é²è·³è»Š" }
                ]
            },
            "Furnace": {
                "F-2001": [
                    { reason: "F.G ä½å£“åŠ›", tag: "PSLL-713 A/B/C", value: "0.07 kg/cmÂ²", logic: "4é¸2" },
                    { reason: "ç©ºæ°£ä½æµé‡", tag: "FSLL-081 A/B/C", value: "5000 NMÂ³/h", logic: "" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-995 A/B", value: "æ§åˆ¶å®¤", logic: "" }
                ],
                "F-2002": [
                    { reason: "F.G ä½å£“åŠ›", tag: "PSLL-715 A/B/C", value: "0.17 kg/cmÂ²", logic: "4é¸2" },
                    { reason: "ç©ºæ°£ä½æµé‡", tag: "FSLL-085 A/B/C", value: "1500 NMÂ³/h", logic: "" },
                    { reason: "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", tag: "HS-988 A/B", value: "æ§åˆ¶å®¤", logic: "" }
                ]
            },
            "Pump": {
                "P-2001A/B": [
                    { reason: "æ»‘æ²¹ä½ä½å£“åŠ›", tag: "PSLL-798(A)/800(B)", value: "0.98/0.7 kg/cmÂ²", logic: "3é¸2" }
                ],
                "P-2002A/B": [
                    { reason: "æ»‘æ²¹ä½ä½å£“åŠ›", tag: "PSLL-802(A)/804(B)", value: "0.98/0.84 kg/cmÂ²", logic: "3é¸2" }
                ],
                "P-2003A/B": [
                    { reason: "æ»‘æ²¹ä½ä½å£“åŠ›", tag: "PSLL-806(A)/808(B)", value: "0.77/0.7 kg/cmÂ²", logic: "3é¸2" }
                ],
                "P-2016A/B": [ { reason: "å‡ºå£ä½å£“åŠ›", tag: "PSL-711", value: "3.2 kg/cmÂ²", logic: "Auto Start" } ],
                "P-2017A/B": [ { reason: "å‡ºå£ä½å£“åŠ›", tag: "PSL-709", value: "5 kg/cmÂ²", logic: "Auto Start" } ]
            }
        };

        const appDiv = document.getElementById('display-area');

        // é¦–é æ¸²æŸ“
        function renderHome() {
            let html = '<div class="grid-menu">';
            
            // åŠ å…¥ç¸½è¡¨é¸é …
            html += `<button class="btn" onclick="renderMasterMap()">
                        <span style="font-size:1.5rem; display:block; margin-bottom:5px;">ğŸ•¸ï¸</span>
                        é€£é–å› æœç¸½è¡¨ (MASTER MAP)
                     </button>`;

            // å¸¸è¦é¸é …
            Object.keys(db).forEach(category => {
                let icon = '';
                if(category === 'Compressor') icon = 'âš™ï¸';
                if(category === 'Furnace') icon = 'ğŸ”¥';
                if(category === 'Pump') icon = 'ğŸ’§';
                html += `<button class="btn" onclick="renderCategory('${category}')">
                            <span style="font-size:1.5rem; display:block; margin-bottom:5px;">${icon}</span>
                            ${category}
                         </button>`;
            });
            html += '</div>';
            appDiv.innerHTML = html;
        }

        // æ¸²æŸ“ç¸½è¡¨ (Mermaid å¿ƒæ™ºåœ–)
        function renderMasterMap() {
            let html = `<button class="btn btn-back" onclick="renderHome()"> â† è¿”å›ä¸»é¸å–® </button>`;
            html += `<h2 style="text-align:center; color:var(--text-highlight);">RDS é€£é–å› æœé—œä¿‚åœ–</h2>`;
            
            // Mermaid èªæ³•å®šç¾©æµç¨‹åœ–
            // æ ¹æ“š RDS1é€£é–.pdf èˆ‡ source 1, 52 çš„é‚è¼¯
            html += `
            <div class="detail-card mermaid-container">
                <div class="mermaid">
                    graph TD
                        subgraph CAUSES [è·³è»Šä¸»å› ]
                            F2001[F-2001 S/D] -->|é€£é–| C2002
                            F2002[F-2002 S/D] -->|é€£é–| C2002
                            APH[APH S/D] -->|é€£é–| C2002
                            MCC[MCC 480V Power Fail] -->|Delay 3s| C2002
                        end

                        subgraph MAIN_TARGET [å—å½±éŸ¿æ ¸å¿ƒ]
                            C2002((C-2002 S/D))
                        end

                        subgraph RELATED [ç›¸é—œè¨­å‚™é€£é–]
                            C2005_P[C-2005 å£“å·® PDSLL-733] -->|è§¸ç™¼| XV941[é–‹å•Ÿ XV-941]
                            XV941 -->|5ç§’æœªå…¨é–‹| C2005[C-2005 S/D]
                            
                            C2004_L[C-2004 LSLL-429] -->|é€£é–| C2004[C-2004 S/D]
                            
                            P2001[P-2001 A/B S/D] -.->|å½±éŸ¿é€²æ–™| C2002
                        end

                        classDef trip fill:#feb2b2,stroke:#e53e3e,stroke-width:2px,color:#742a2a;
                        classDef equip fill:#e0e5ec,stroke:#667eea,stroke-width:2px;
                        
                        class C2002,F2001,F2002,APH,MCC,C2005,C2004,P2001 trip;
                </div>
            </div>
            <div style="text-align:center; margin-top:15px; font-size:0.9rem; color:#888;">
                * å¯¦ç·šä»£è¡¨ç›´æ¥ç¡¬é«”é€£é– (Hardwire Interlock) <br>
                * è™›ç·šä»£è¡¨è£½ç¨‹å½±éŸ¿ (Process Upset)
            </div>
            `;
            
            appDiv.innerHTML = html;
            // é‡æ–°æ¸²æŸ“ Mermaid åœ–è¡¨
            mermaid.init(undefined, document.querySelectorAll('.mermaid'));
        }

        // æ¸²æŸ“åˆ†é¡åˆ—è¡¨
        function renderCategory(category) {
            let html = `<button class="btn btn-back" onclick="renderHome()"> â† è¿”å›ä¸»é¸å–® </button>`;
            html += `<h2 style="text-align:center; color:var(--text-highlight); border-bottom:1px solid #ccc; padding-bottom:15px;">${category} åˆ—è¡¨</h2>`;
            html += '<div class="grid-menu">';
            
            Object.keys(db[category]).forEach(equipment => {
                html += `<button class="btn" onclick="renderDetails('${category}', '${equipment}')">${equipment}</button>`;
            });
            
            html += '</div>';
            appDiv.innerHTML = html;
        }

        // æ¸²æŸ“è©³ç´°æ•¸æ“š
        function renderDetails(category, equipment) {
            const data = db[category][equipment];
            let html = `<button class="btn btn-back" onclick="renderCategory('${category}')"> â† è¿”å› ${category} </button>`;
            
            html += `<div class="detail-card">`;
            html += `<h3 style="color:var(--text-highlight); border-bottom: 2px solid var(--accent-color); padding-bottom:10px;">
                        ${equipment} è·³è»Šå› ç´ 
                     </h3>`;
            
            html += `<table>
                        <thead>
                            <tr>
                                <th>è·³è»Šå› ç´ </th>
                                <th>ä½è™Ÿ (Tag No.)</th>
                                <th>è¨­å®šå€¼ (Set Point)</th>
                                <th>é‚è¼¯/å‚™è¨»</th>
                            </tr>
                        </thead>
                        <tbody>`;
            
            data.forEach(item => {
                html += `<tr>
                            <td>${item.reason}</td>
                            <td class="tag-no">${item.tag}</td>
                            <td class="value">${item.value}</td>
                            <td>${item.logic}</td>
                         </tr>`;
            });

            html += `</tbody></table>`;
            html += `</div>`;
            
            appDiv.innerHTML = html;
        }

        // å•Ÿå‹• App
        renderHome();

    </script>
</body>
</html>
