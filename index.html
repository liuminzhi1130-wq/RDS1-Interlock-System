<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RDS é€£é–é‚è¼¯æŸ¥è©¢ç³»çµ±</title>
    
    <script>
        window.onerror = function(msg, url, line) {
            alert("ç¨‹å¼åŸ·è¡ŒéŒ¯èª¤ï¼š\n" + msg + "\nè¡Œæ•¸: " + line);
        };
    </script>

    <style>
        :root {
            --bg-color: #e0e5ec;
            --text-main: #4a5568;
            --text-highlight: #2d3748;
            --shadow-light: #ffffff;
            --shadow-dark: #a3b1c6;
            --accent-color: #667eea;
            --trip-color: #e53e3e;
            --mech-color: #d69e2e;
            --proc-color: #3182ce;
            --auto-color: #38a169; /* Auto Start å°ˆç”¨ç¶ è‰² */
            --back-btn-bg: linear-gradient(145deg, #ffffff, #e6e6e6);
            --back-btn-text: #555;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: default;
            touch-action: manipulation;
        }

        h1 {
            color: var(--text-highlight);
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
            text-shadow: 1px 1px 1px #fff;
        }

        #app-container {
            width: 100%;
            max-width: 600px;
            background: var(--bg-color);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 12px 12px 24px var(--shadow-dark), 
                       -12px -12px 24px var(--shadow-light);
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* ------------------------------------------- */
        /* æ¿æ‰‹æ¸¸æ¨™è¨­å®š */
        /* ------------------------------------------- */
        .btn, .search-result-item, .btn-back {
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%234a5568' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'></path></svg>") 0 20, pointer;
        }
        .btn:active, .search-result-item:active, .btn-back:active {
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%232d3748' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><g transform='rotate(-45 12 12)'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'></path></g></svg>") 0 20, pointer;
        }

        /* ------------------------------------------- */
        /* é€šç”¨æŒ‰éˆ•æ¨£å¼ */
        /* ------------------------------------------- */
        .btn {
            border: none;
            outline: none;
            background: var(--bg-color);
            color: var(--text-main);
            font-size: 1.1rem;
            font-weight: 600;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 6px 6px 12px var(--shadow-dark), 
                       -6px -6px 12px var(--shadow-light);
            transition: transform 0.05s ease;
            width: 100%;
            text-align: left;
            display: flex;
            align-items: center;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        .btn:active {
            box-shadow: inset 4px 4px 8px var(--shadow-dark), 
                        inset -4px -4px 8px var(--shadow-light);
            transform: scale(0.98);
        }

        /* ç«‹é«”è¿”å›éµ */
        .btn-back {
            margin-bottom: 15px;
            padding: 12px 20px;
            text-align: center;
            display: block;
            width: 100%;
            box-sizing: border-box;
            background: var(--back-btn-bg);
            color: var(--back-btn-text);
            font-weight: bold;
            font-size: 1rem;
            border: 1px solid #d1d1d1;
            border-radius: 50px;
            box-shadow: 5px 5px 10px var(--shadow-dark), 
                       -5px -5px 10px var(--shadow-light);
            transition: all 0.1s ease;
        }

        .btn-back:active {
            box-shadow: inset 3px 3px 6px var(--shadow-dark), 
                        inset -3px -3px 6px var(--shadow-light);
            transform: translateY(2px);
            background: #e0e0e0;
        }

        .btn-icon { font-size: 1.6rem; margin-right: 15px; width: 40px; text-align: center; }
        .btn-text { flex-grow: 1; }
        .arrow { color: var(--accent-color); font-weight: 900; font-size: 1.2rem; }
        
        .btn-process { border-left: 5px solid var(--proc-color); }
        .btn-mech { border-left: 5px solid var(--mech-color); }

        .search-box {
            width: 100%; padding: 15px; border: none; border-radius: 50px;
            background: var(--bg-color);
            box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
            font-size: 1rem; margin-bottom: 20px; color: var(--text-highlight);
            box-sizing: border-box;
        }
        .search-box:focus { outline: none; border: 1px solid var(--accent-color); }

        .detail-card {
            background: var(--bg-color); border-radius: 20px; padding: 15px;
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
            overflow-x: auto; flex-grow: 1;
        }

        table { width: 100%; border-collapse: collapse; min-width: 300px; }
        th { text-align: left; color: var(--accent-color); padding: 12px 8px; font-size: 0.95rem; border-bottom: 2px solid #cbd5e0; white-space: nowrap; }
        td { padding: 12px 8px; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 0.95rem; vertical-align: top; }
        
        .tag-no { color: var(--accent-color); font-family: monospace; font-weight: 700; display: block; margin-top: 4px; font-size: 0.9rem; }
        .value { color: var(--trip-color); font-weight: 700; display: block; margin-top: 4px; }
        .value-auto { color: var(--auto-color); font-weight: 700; display: block; margin-top: 4px; }
        
        .search-result-item {
            background: var(--bg-color); margin-bottom: 15px; padding: 15px;
            border-radius: 15px; box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
            border-left: 6px solid var(--accent-color);
        }
        .search-result-item:active { transform: scale(0.98); }
    </style>
</head>
<body>

    <h1>RDS é€£é–ç³»çµ±</h1>

    <div id="app-container">
        <div id="display-area" style="width: 100%; height: 100%; display: flex; flex-direction: column;">
            <div id="loading-msg" style="text-align:center; padding-top:50px; color:#aaa;">ç³»çµ±è¼‰å…¥ä¸­...</div>
        </div>
    </div>

    <script>
        // è³‡æ–™åº«å®šç¾©
        var db = {
            "Compressor": {
                "C-2001A": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "D-2010 é«˜é«˜æ¶²ä½", "tag": "LSHH-403 A/B/C", "value": "-", "logic": "3é¸2 (Common)" },
                        { "reason": "å…è¨±é–‹è»Šä¹‹ 9 é¡† S.W é–‹é—œ", "tag": "-", "value": "å•Ÿå‹•å¾Œ 60s å…§æœ‰æ•ˆ", "logic": "é€£é–è·³è»Š" },
                        { "reason": "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", "tag": "PSLL-603 A/B/C", "value": "14.8 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-397 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "äºŒç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-398 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "ä¸‰ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-399 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "D-2012A é«˜é«˜æ¶²ä½", "tag": "LSHH-408", "value": "-", "logic": "" },
                        { "reason": "D-2013A é«˜é«˜æ¶²ä½", "tag": "LSHH-410", "value": "-", "logic": "" }
                    ],
                    "Mechanical": [
                        { "reason": "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-768", "value": "1.7 kg/cmÂ²", "logic": "" },
                        { "reason": "æ³¨æ²¹å™¨ä½æ¶²é¢", "tag": "LALL-566", "value": "3.5 kg/cmÂ²", "logic": "" },
                        { "reason": "æº«æ°´å£“åŠ›ä½", "tag": "PALL-774", "value": "1.76 kg/cmÂ²", "logic": "" },
                        { "reason": "ä¸»é¦¬é”ç·šåœˆæº«åº¦é«˜", "tag": "TAHH-496 B/D/F", "value": "140Â°C", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-955 A/B", "value": "æ§åˆ¶å®¤/L.P", "logic": "" }
                    ]
                },
                "C-2001B": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "D-2010 é«˜é«˜æ¶²ä½", "tag": "LSHH-403 A/B/C", "value": "-", "logic": "3é¸2 (Common)" },
                        { "reason": "å…è¨±é–‹è»Šä¹‹ 9 é¡† S.W é–‹é—œ", "tag": "-", "value": "å•Ÿå‹•å¾Œ 60s å…§æœ‰æ•ˆ", "logic": "é€£é–è·³è»Š" },
                        { "reason": "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", "tag": "PSLL-612 A/B/C", "value": "14.8 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-400 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "äºŒç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-401 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "ä¸‰ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-402 A/B/C", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "D-2012A é«˜é«˜æ¶²ä½", "tag": "LSHH-415", "value": "-", "logic": "" },
                        { "reason": "D-2013A é«˜é«˜æ¶²ä½", "tag": "LSHH-417", "value": "-", "logic": "" }
                    ],
                    "Mechanical": [
                        { "reason": "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-769", "value": "1.7 kg/cmÂ²", "logic": "" },
                        { "reason": "æ³¨æ²¹å™¨ä½æ¶²é¢", "tag": "LALL-567", "value": "3.5 kg/cmÂ²", "logic": "" },
                        { "reason": "æº«æ°´å£“åŠ›ä½", "tag": "PALL-775", "value": "1.76 kg/cmÂ²", "logic": "" },
                        { "reason": "ä¸»é¦¬é”ç·šåœˆæº«åº¦é«˜", "tag": "TAHH-497 B/D/F", "value": "140Â°C", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-959 A/B", "value": "æ§åˆ¶å®¤/L.P", "logic": "" }
                    ]
                },
                "C-2001C": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "D-2010 é«˜é«˜æ¶²ä½", "tag": "LSHH-403 A/B/C", "value": "-", "logic": "3é¸2 (Common)" },
                        { "reason": "å…è¨±é–‹è»Šä¹‹ 9 é¡† S.W é–‹é—œ", "tag": "-", "value": "å•Ÿå‹•å¾Œ 60s å…§æœ‰æ•ˆ", "logic": "é€£é–è·³è»Š" },
                        { "reason": "ä¸€ç´šé€²å£ä½ä½å£“åŠ›", "tag": "PSLL-620 A/B/C", "value": "14.8 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "å„ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-403~405", "value": "149Â°C", "logic": "3é¸2" },
                        { "reason": "D-2012A é«˜é«˜æ¶²ä½", "tag": "LSHH-422", "value": "-", "logic": "" },
                        { "reason": "D-2013A é«˜é«˜æ¶²ä½", "tag": "LSHH-424", "value": "-", "logic": "" }
                    ],
                    "Mechanical": [
                        { "reason": "æ©Ÿæ¶æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-770", "value": "1.7 kg/cmÂ²", "logic": "" },
                        { "reason": "æ³¨æ²¹å™¨ä½æ¶²é¢", "tag": "LALL-568", "value": "3.5 kg/cmÂ²", "logic": "" },
                        { "reason": "æº«æ°´å£“åŠ›ä½", "tag": "PALL-776", "value": "1.76 kg/cmÂ²", "logic": "" },
                        { "reason": "ä¸»é¦¬é”ç·šåœˆæº«åº¦é«˜", "tag": "TAHH-498 B/D/F", "value": "140Â°C", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-963 A/B", "value": "æ§åˆ¶å®¤/L.P", "logic": "" }
                    ]
                },
                "C-2002": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "å‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-406 A/B/C", "value": "193Â°C", "logic": "3é¸2" },
                        { "reason": "å‡ºå£ä½ä½æµé‡", "tag": "FSLL-140 A/B/C", "value": "100 MÂ³/H", "logic": "3é¸2 (Overrideå¯)" },
                        { "reason": "D-2014 é«˜é«˜æ¶²ä½", "tag": "LSHH-479", "value": "-", "logic": "3é¸2" },
                        { "reason": "é€²å£ä½ä½å£“åŠ›", "tag": "PSLL-654 A/B/C", "value": "0.14 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "D-2005 é«˜é«˜æ¶²ä½", "tag": "LSHH-455", "value": "-", "logic": "3é¸2 (ä¸é€£é–å…¶ä»–)" }
                    ],
                    "Mechanical": [
                        { "reason": "æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-791", "value": "0.56 kg/cmÂ²", "logic": "Delay 1s" },
                        { "reason": "é ‚éƒ¨å¯†å°æ²¹æ§½æ¶²é¢ä½", "tag": "LALL-556", "value": "2502mm", "logic": "Topèµ·, Delay 1s" },
                        { "reason": "å¯†å°æ²¹/æ°£å·®å£“ä½", "tag": "DPALL-786", "value": "0.21 kg/cmÂ²", "logic": "Delay 1s" },
                        { "reason": "è½‰è»¸å¾‘å‘é«˜éœ‡å‹•", "tag": "Vib High", "value": "63.5 um", "logic": "Delay 1s" },
                        { "reason": "è½‰è»¸è»¸å‘é«˜ä½ç§»", "tag": "Disp High", "value": "304.8 um", "logic": "Delay 1s" },
                        { "reason": "è¶…é€Ÿè·³è»Š", "tag": "Overspeed", "value": "12628 rpm", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-906", "value": "æ§åˆ¶å®¤", "logic": "" }
                    ]
                },
                "C-2003A": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "D-2014 é«˜é«˜æ¶²ä½", "tag": "LSHH-479 A/B/C", "value": "-", "logic": "3é¸2 (Common)" },
                        { "reason": "ç¬¬ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-408", "value": "140Â°C", "logic": "" },
                        { "reason": "ç¬¬äºŒç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-419", "value": "99Â°C", "logic": "" },
                        { "reason": "é€²å£ä½ä½å£“åŠ›", "tag": "PSLL-654 A/B/C", "value": "0.14 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "D-2034A é«˜é«˜æ¶²ä½", "tag": "LSHH-528", "value": "-", "logic": "" }
                    ],
                    "Mechanical": [
                        { "reason": "æ›²è»¸ç®±æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-838", "value": "0.35 kg/cmÂ²", "logic": "" },
                        { "reason": "æ³¨æ²¹å™¨æ¶²é¢ä½", "tag": "LALL-579", "value": "3.52 kg/cmÂ²", "logic": "" },
                        { "reason": "æº«æ°´å£“åŠ›ä½", "tag": "PALL-840", "value": "0.35 kg/cmÂ²", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-938A", "value": "æ§åˆ¶å®¤", "logic": "" }
                    ]
                },
                "C-2003B": {
                    "hasSub": true,
                    "Process": [
                        { "reason": "D-2014 é«˜é«˜æ¶²ä½", "tag": "LSHH-479 A/B/C", "value": "-", "logic": "3é¸2 (Common)" },
                        { "reason": "ç¬¬ä¸€ç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-409", "value": "140Â°C", "logic": "" },
                        { "reason": "ç¬¬äºŒç´šå‡ºå£é«˜é«˜æº«åº¦", "tag": "TSHH-420", "value": "99Â°C", "logic": "" },
                        { "reason": "é€²å£ä½ä½å£“åŠ›", "tag": "PSLL-656 A/B/C", "value": "0.14 kg/cmÂ²", "logic": "3é¸2" },
                        { "reason": "D-2034B é«˜é«˜æ¶²ä½", "tag": "LSHH-531", "value": "-", "logic": "" }
                    ],
                    "Mechanical": [
                        { "reason": "æ›²è»¸ç®±æ»‘æ²¹å£“åŠ›ä½", "tag": "PALL-839", "value": "0.35 kg/cmÂ²", "logic": "" },
                        { "reason": "æ³¨æ²¹å™¨æ¶²é¢ä½", "tag": "LALL-580", "value": "3.52 kg/cmÂ²", "logic": "" },
                        { "reason": "æº«æ°´å£“åŠ›ä½", "tag": "PALL-841", "value": "0.35 kg/cmÂ²", "logic": "" },
                        { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-930A", "value": "æ§åˆ¶å®¤", "logic": "" }
                    ]
                },
                "C-2004": { "hasSub": false, "list": [
                    { "reason": "å‡ºå£ä½å£“åŠ›", "tag": "PSL-681", "value": "50 mmH2O", "logic": "Auto Start å‚™ç”¨æ³µ" }
                ]},
                "C-2005": { "hasSub": false, "list": [
                    { "reason": "é€²å‡ºå£é«˜å·®å£“", "tag": "PDSLL-733 A/B/C", "value": "80 mmH2O", "logic": "è§¸ç™¼é–‹å•ŸXV-941" },
                    { "reason": "C-2005 è·³è»Š", "tag": "Timer", "value": "5 sec", "logic": "XV-941æœªå…¨é–‹å‰‡è·³è»Š" }
                ]}
            },
            "Furnace": {
                "F-2001": { "hasSub": false, "list": [
                    { "reason": "F.G ä½å£“åŠ›", "tag": "PSLL-713 A/B/C", "value": "0.07 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "ç©ºæ°£ä½æµé‡", "tag": "FSLL-081 A/B/C", "value": "5000 NMÂ³/h", "logic": "" },
                    { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-995 A/B", "value": "æ§åˆ¶å®¤", "logic": "" }
                ]},
                "F-2002": { "hasSub": false, "list": [
                    { "reason": "F.G ä½å£“åŠ›", "tag": "PSLL-715 A/B/C", "value": "0.17 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "ç©ºæ°£ä½æµé‡", "tag": "FSLL-085 A/B/C", "value": "800 NMÂ³/h", "logic": "" },
                    { "reason": "æ‰‹å‹•è·³è»ŠæŒ‰éˆ•", "tag": "HS-988 A/B", "value": "æ§åˆ¶å®¤", "logic": "" }
                ]}
            },
            "Pump": {
                "P-2001A": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-798 A/B/C", "value": "0.98 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-797", "value": "1.12 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-464 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2001B": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-800 A/B/C", "value": "0.7 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-799", "value": "0.84 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-466 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2002A": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-802 A/B/C", "value": "0.98 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-801", "value": "1.12 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-468 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2002B": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-804 A/B/C", "value": "0.84 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-803", "value": "0.98 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-470 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2003A": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-806 A/B/C", "value": "0.77 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-805", "value": "0.91 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-472 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2003B": { "hasSub": false, "list": [
                    { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-808 A/B/C", "value": "0.7 kg/cmÂ²", "logic": "3é¸2" },
                    { "reason": "æ»‘æ²¹ä½å£“åŠ› (Auto Start)", "tag": "PSL-807", "value": "0.84 kg/cmÂ²", "logic": "å•Ÿå‹•è¼”åŠ©æ³µ", "isAuto": true },
                    { "reason": "é¦¬é”ç·šåœˆé«˜æº«åº¦", "tag": "TSHH-474 B/D/F", "value": "160Â°C", "logic": "è·³è»Š" }
                ]},
                "P-2016A/B": { "hasSub": false, "list": [ { "reason": "å‡ºå£ä½å£“åŠ›", "tag": "PSL-711", "value": "3.2 kg/cmÂ²", "logic": "Auto Start" } ]},
                "P-2017A/B": { "hasSub": false, "list": [ { "reason": "å‡ºå£ä½å£“åŠ›", "tag": "PSL-709", "value": "5 kg/cmÂ²", "logic": "Auto Start" } ]},
                "P-2021A/B": { "hasSub": false, "list": [ { "reason": "æ»‘æ²¹ä½ä½å£“åŠ›", "tag": "PSLL-813B/815B", "value": "0.7 kg/cmÂ²", "logic": "Delay 60s" } ]}
            }
        };

        const appDiv = document.getElementById('display-area');

        // é¦–é æ¸²æŸ“
        function renderHome() {
            let html = '<div style="flex-grow:1; display:flex; flex-direction:column; gap:15px;">';
            
            // æœå°‹æŒ‰éˆ•
            html += `<button class="btn" onclick="renderSearchPage()">
                        <div class="btn-icon">ğŸ”</div>
                        <div class="btn-text">æœå°‹è³‡æ–™ (Search)</div>
                        <div class="arrow">âœ</div>
                     </button>`;
            
            // è¨­å‚™åˆ†é¡æŒ‰éˆ•
            const icons = { 'Compressor': 'âš™ï¸', 'Furnace': 'ğŸ”¥', 'Pump': 'ğŸ’§' };
            Object.keys(db).forEach(function(category) {
                html += `<button class="btn" onclick="renderCategory('${category}')">
                            <div class="btn-icon">${icons[category]}</div>
                            <div class="btn-text">${category}</div>
                            <div class="arrow">âœ</div>
                         </button>`;
            });
            html += '</div>';
            appDiv.innerHTML = html;
        }

        // è¨­å‚™åˆ†é¡åˆ—è¡¨
        function renderCategory(category) {
            let html = `<button class="btn-back" onclick="renderHome()"> â† è¿”å›ä¸»é¸å–® </button>`;
            html += `<h2 style="text-align:center; color:var(--text-highlight);">${category}</h2>`;
            html += '<div style="display:flex; flex-direction:column; gap:15px;">';
            Object.keys(db[category]).forEach(function(equipment) {
                html += `<button class="btn" onclick="renderDetails('${category}', '${equipment}')">
                            <div class="btn-text">${equipment}</div>
                            <div class="arrow">âœ</div>
                         </button>`;
            });
            html += '</div>';
            appDiv.innerHTML = html;
        }

        // è¨­å‚™è©³æƒ…é‚è¼¯
        function renderDetails(category, equipment) {
            const equipData = db[category][equipment];
            if (equipData.hasSub) {
                renderSubSelection(category, equipment);
            } else {
                renderTable(category, equipment, equipData.list, null);
            }
        }

        // å­é¸å–® (è£½ç¨‹/æ©Ÿæ¢°)
        function renderSubSelection(category, equipment) {
            let html = `<button class="btn-back" onclick="renderCategory('${category}')"> â† è¿”å› ${category} </button>`;
            html += `<h2 style="text-align:center; color:var(--text-highlight);">${equipment} è·³è»Šé¡å‹é¸æ“‡</h2>`;
            html += `<div style="display:flex; flex-direction:column; gap:20px; margin-top:20px;">`;
            
            html += `<button class="btn btn-process" onclick="renderSubTable('${category}', '${equipment}', 'Process')">
                        <div class="btn-icon">ğŸ­</div>
                        <div class="btn-text">è£½ç¨‹é€£é–è·³è»Š (Process Trip)</div>
                        <div class="arrow">âœ</div>
                     </button>`;
                     
            html += `<button class="btn btn-mech" onclick="renderSubTable('${category}', '${equipment}', 'Mechanical')">
                        <div class="btn-icon">ğŸ› ï¸</div>
                        <div class="btn-text">æ©Ÿæ¢°å› ç´ è·³è»Š (Mechanical Trip)</div>
                        <div class="arrow">âœ</div>
                     </button>`;
            
            html += `</div>`;
            appDiv.innerHTML = html;
        }

        // è½‰ç™¼åˆ°è¡¨æ ¼æ¸²æŸ“
        function renderSubTable(category, equipment, type) {
            const data = db[category][equipment][type];
            renderTable(category, equipment, data, type);
        }

        // è¡¨æ ¼æ¸²æŸ“æ ¸å¿ƒ
        function renderTable(category, equipment, dataList, subType) {
            let backAction = subType ? `renderSubSelection('${category}', '${equipment}')` : `renderCategory('${category}')`;
            let title = equipment + (subType ? ` - ${subType === 'Process' ? 'è£½ç¨‹é€£é–' : 'æ©Ÿæ¢°å› ç´ '}` : '');

            let html = `<button class="btn-back" onclick="${backAction}"> â† è¿”å›ä¸Šä¸€é  </button>`;
            html += `<div class="detail-card">`;
            html += `<h3 style="color:var(--text-highlight); border-bottom: 2px solid var(--accent-color); padding-bottom:15px; margin-top:0;">${title}</h3>`;
            html += `<table>
                        <thead>
                            <tr>
                                <th width="45%">å› ç´ </th>
                                <th width="35%">ä½è™Ÿ / è¨­å®š</th>
                                <th width="20%">é‚è¼¯/å‚™è¨»</th>
                            </tr>
                        </thead>
                        <tbody>`;
            
            dataList.forEach(function(item) {
                // Auto Start æ•¸å€¼é¡¯ç¤ºç‚ºç¶ è‰²
                let valClass = item.isAuto ? 'value-auto' : 'value';
                
                html += `<tr>
                            <td>${item.reason}</td>
                            <td>
                                <span class="tag-no">${item.tag}</span>
                                <span class="${valClass}">${item.value}</span>
                            </td>
                            <td style="font-size:0.9rem; color:#718096;">${item.logic}</td>
                         </tr>`;
            });
            html += `</tbody></table></div>`;
            appDiv.innerHTML = html;
        }

        // æœå°‹é é¢
        function renderSearchPage() {
            let html = `<button class="btn-back" onclick="renderHome()"> â† è¿”å›ä¸»é¸å–® </button>`;
            html += `<input type="text" id="searchInput" class="search-box" placeholder="è¼¸å…¥ä½è™Ÿã€è¨­å‚™åæˆ–æ•¸å€¼..." onkeyup="performSearch()">`;
            html += `<div id="searchResults"></div>`;
            appDiv.innerHTML = html;
            setTimeout(function() { document.getElementById('searchInput').focus(); }, 100);
        }

        // æœå°‹åŸ·è¡Œ
        function performSearch() {
            const query = document.getElementById('searchInput').value.toUpperCase().trim();
            const resultsDiv = document.getElementById('searchResults');
            if (query.length < 2) { resultsDiv.innerHTML = '<div style="text-align:center; color:#999; margin-top:20px;">è«‹è¼¸å…¥è‡³å°‘ 2 å€‹å­—å…ƒ...</div>'; return; }

            let matches = [];
            Object.keys(db).forEach(function(cat) {
                Object.keys(db[cat]).forEach(function(equip) {
                    const obj = db[cat][equip];
                    if (obj.hasSub) {
                        ['Process', 'Mechanical'].forEach(function(subType) {
                            obj[subType].forEach(function(item) {
                                if ((item.reason && item.reason.includes(query)) || (item.tag && item.tag.includes(query)) || (item.value && item.value.includes(query)) || equip.includes(query)) {
                                    matches.push({ equip: equip, cat: cat, type: subType, item: item });
                                }
                            });
                        });
                    } else {
                        obj.list.forEach(function(item) {
                            if ((item.reason && item.reason.includes(query)) || (item.tag && item.tag.includes(query)) || (item.value && item.value.includes(query)) || equip.includes(query)) {
                                matches.push({ equip: equip, cat: cat, type: 'General', item: item });
                            }
                        });
                    }
                });
            });

            if (matches.length === 0) {
                resultsDiv.innerHTML = '<div style="text-align:center; color:#999; margin-top:20px;">æŸ¥ç„¡è³‡æ–™</div>';
            } else {
                let html = '';
                // é™åˆ¶é¡¯ç¤ºå‰ 50 ç­†çµæœ
                matches.slice(0, 50).forEach(function(m) { 
                    let typeLabel = m.type === 'Process' ? 'ğŸ­ è£½ç¨‹' : (m.type === 'Mechanical' ? 'ğŸ› ï¸ æ©Ÿæ¢°' : 'ä¸€èˆ¬');
                    let clickAction = m.type === 'General' ? `renderDetails('${m.cat}', '${m.equip}')` : `renderSubTable('${m.cat}', '${m.equip}', '${m.type}')`;
                    
                    html += `<div class="search-result-item" onclick="${clickAction}">
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <span style="font-weight:bold; color:var(--text-highlight); font-size:1.1rem;">${m.equip}</span>
                                    <span style="font-size:0.8rem; background:#cbd5e0; padding:2px 8px; border-radius:10px;">${typeLabel}</span>
                                </div>
                                <div style="margin-top:5px; color:#4a5568;">
                                    ${m.item.reason} <span class="tag-no">${m.item.tag}</span>
                                </div>
                             </div>`;
                });
                resultsDiv.innerHTML = html;
            }
        }

        // å•Ÿå‹• App
        renderHome();
    </script>
</body>
</html>
